Index: easyshop/shop/views.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\r\nfrom django.http import Http404\r\nfrom django.shortcuts import render, get_object_or_404\r\nimport requests\r\nfrom django.views.generic import ListView, DetailView\r\nfrom .models import Category, Product\r\nfrom cart.forms import CartAddProductForm\r\n\r\n\r\nclass ProductListView(ListView):\r\n    model = Product\r\n    template_name = 'shop/product/list.html'\r\n    context_object_name = 'products'\r\n#     paginate_by = 10\r\n\r\n\r\n    def get_queryset(self):\r\n        queryset = super().get_queryset()\r\n\r\n        category_slug = self.kwargs.get('slug')\r\n        if category_slug:\r\n            queryset = queryset.filter(category__slug=category_slug)\r\n\r\n        return queryset\r\n\r\n    def get_context_data(self, **kwargs):\r\n        context = super().get_context_data(**kwargs)\r\n        category_slug = self.kwargs.get('slug')\r\n        if category_slug:\r\n            category = get_object_or_404(Category, slug=category_slug)\r\n            context['category'] = category\r\n        context['categories'] = Category.objects.all()\r\n        return context\r\n\r\n\r\nclass ProductDetailView(DetailView):\r\n    model = Product\r\n    template_name = 'shop/product/detail.html'\r\n    context_object_name = 'product'\r\n\r\n    def get_object(self, queryset=None):\r\n        # Use select_related() to fetch the related Category object with the product\r\n        return super().get_object()\r\n\r\n    def get_context_data(self, **kwargs):\r\n        context = super().get_context_data(**kwargs)\r\n        cart_product_form = CartAddProductForm()\r\n        context['cart_product_form'] = cart_product_form\r\n        return context\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/easyshop/shop/views.py b/easyshop/shop/views.py
--- a/easyshop/shop/views.py	(revision 28126a7693947089279d0b796eacade3338dab35)
+++ b/easyshop/shop/views.py	(date 1678966496506)
@@ -1,4 +1,3 @@
-
 from django.http import Http404
 from django.shortcuts import render, get_object_or_404
 import requests
